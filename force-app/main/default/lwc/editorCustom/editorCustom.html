<template>
    <div class="editor-container">
        <!-- Toolbar -->
        <div class="toolbar">
            <div class="toolbar-group">
                <select class="toolbar-select" onchange={handleHeadingChange}>
                    <option value="">Normal</option>
                    <option value="h1">Heading 1</option>
                    <option value="h2">Heading 2</option>
                    <option value="h3">Heading 3</option>
                </select>
            </div>

            <div class="toolbar-divider"></div>

            <div class="toolbar-group">
                <button type="button" class="toolbar-btn" data-command="bold" onclick={handleToolbarClick} title="Bold (Ctrl+B)">
                    <b>B</b>
                </button>
                <button type="button" class="toolbar-btn" data-command="italic" onclick={handleToolbarClick} title="Italic (Ctrl+I)">
                    <i>I</i>
                </button>
                <button type="button" class="toolbar-btn" data-command="underline" onclick={handleToolbarClick} title="Underline (Ctrl+U)">
                    <u>U</u>
                </button>
                <button type="button" class="toolbar-btn" data-command="strikeThrough" onclick={handleToolbarClick} title="Strikethrough">
                    <s>S</s>
                </button>
            </div>

            <div class="toolbar-divider"></div>

            <div class="toolbar-group">
                <button type="button" class="toolbar-btn" data-command="foreColor" data-value="#ff0000" onclick={handleToolbarClick} title="Text Color">
                    <span style="color: red;">A</span>
                </button>
                <button type="button" class="toolbar-btn" data-command="hiliteColor" data-value="#ffff00" onclick={handleToolbarClick} title="Highlight">
                    <span style="background: yellow;">H</span>
                </button>
            </div>

            <div class="toolbar-divider"></div>

            <div class="toolbar-group">
                <button type="button" class="toolbar-btn" data-command="insertUnorderedList" onclick={handleToolbarClick} title="Bullet List">
                    &#8226;
                </button>
                <button type="button" class="toolbar-btn" data-command="insertOrderedList" onclick={handleToolbarClick} title="Numbered List">
                    1.
                </button>
                <button type="button" class="toolbar-btn" data-command="indent" onclick={handleToolbarClick} title="Indent">
                    &#8594;
                </button>
                <button type="button" class="toolbar-btn" data-command="outdent" onclick={handleToolbarClick} title="Outdent">
                    &#8592;
                </button>
            </div>

            <div class="toolbar-divider"></div>

            <div class="toolbar-group">
                <button type="button" class="toolbar-btn" data-command="justifyLeft" onclick={handleToolbarClick} title="Align Left">
                    &#8676;
                </button>
                <button type="button" class="toolbar-btn" data-command="justifyCenter" onclick={handleToolbarClick} title="Align Center">
                    &#8596;
                </button>
                <button type="button" class="toolbar-btn" data-command="justifyRight" onclick={handleToolbarClick} title="Align Right">
                    &#8677;
                </button>
            </div>

            <div class="toolbar-divider"></div>

            <div class="toolbar-group">
                <button type="button" class="toolbar-btn" onclick={handleInsertLink} title="Insert Link">
                    &#128279;
                </button>
                <button type="button" class="toolbar-btn" data-command="insertHorizontalRule" onclick={handleToolbarClick} title="Horizontal Line">
                    &#8213;
                </button>
            </div>

            <div class="toolbar-divider"></div>

            <div class="toolbar-group">
                <button type="button" class="toolbar-btn" data-command="undo" onclick={handleToolbarClick} title="Undo (Ctrl+Z)">
                    &#8630;
                </button>
                <button type="button" class="toolbar-btn" data-command="redo" onclick={handleToolbarClick} title="Redo (Ctrl+Y)">
                    &#8631;
                </button>
                <button type="button" class="toolbar-btn" data-command="removeFormat" onclick={handleToolbarClick} title="Clear Formatting">
                    &#10006;
                </button>
            </div>
        </div>

        <!-- Editable Content Area -->
        <div
            class="editor-content"
            contenteditable="true"
            lwc:ref="editorContent"
            onkeydown={handleKeyDown}
            onkeyup={handleKeyUp}
            oninput={handleInput}
            onclick={handleClick}
            onfocus={handleFocus}
            onblur={handleBlur}
            onpaste={handlePaste}
            onmouseup={handleMouseUp}
            oncontextmenu={handleContextMenu}>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <span class="char-count">Characters: {characterCount}</span>
            <span class="word-count">Words: {wordCount}</span>
            <span class="selection-info">{selectionInfo}</span>
        </div>
    </div>
</template>
